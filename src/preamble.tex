\documentclass[%
    paper=A4,
    twoside=semi,
    openright,
    parskip=full,
    chapterprefix=true,
    11pt,
    headings=normal,
    bibliography=totoc,
    listof=totoc,
    titlepage=on,
    captions=tableabove,
    draft=false,
]{scrreprt}%
\usepackage{scrhack}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage[
    figuresep=quad,
    sansserif=false,
    hangfigurecaption=false,
    hangsection=true,
    hangsubsection=true,
    linespacing=doublespacing,
    colorize=full,
    colortheme=bluemagenta,
    bibsys=bibtex,
    bibfile=references,
    bibstyle=alphabetic,
    wrapfooter=true,
]{cleanthesis}
\usepackage{algorithmicx}
\usepackage{algpseudocode}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{appendix}
\usepackage{bookmark}   % for \toprule and \bottomrule
\usepackage{booktabs}   % for \toprule and \bottomrule
\usepackage{colortbl}   % for \rowcolor, \cellcolor, etc.
\usepackage{color}
\usepackage{courier}    % makes \tt font same size as \rm font
\usepackage{fixltx2e}   % for \textsubscript and \textsuperscript
\usepackage{galois}
\usepackage[acronym,nonumberlist,nopostdot]{glossaries}
\usepackage{graphicx}
\usepackage{listings}   % source code
\usepackage{mathtools}
\usepackage{multirow}   % for \multirow
\usepackage{pgfplotstable}
\usepackage{pgfplots}
\usepackage[inference]{semantic}
\usepackage{stmaryrd}   % double brackets
\usepackage{subfig}
\usepackage{textgreek}  % for \textmu
\usepackage{tikz}       % graphs
\usepackage[obeyDraft,textsize=tiny]{todonotes}
\usepackage{verbatim}
\usepackage{xpatch}

\def\tt{\normalfont\ttfamily}
\pdfsuppresswarningpagegroup=1%

\raggedbottom%

\newacronymstyle{em-long-short}
{%
  \GlsUseAcrEntryDispStyle{long-short}%
}%
{%
  \GlsUseAcrStyleDefs{long-short}%
  \renewcommand*{\genacrfullformat}[2]{%
   \emph{\glsentrylong{##1}}##2\space
   (\firstacronymfont{\glsentryshort{##1}})%
  }%
  \renewcommand*{\Genacrfullformat}[2]{%
   \emph{\Glsentrylong{##1}}##2\space
   (\firstacronymfont{\glsentryshort{##1}})%
  }%
  \renewcommand*{\genplacrfullformat}[2]{%
   \emph{\glsentrylongpl{##1}}##2\space
   (\firstacronymfont{\glsentryshortpl{##1}})%
  }%
  \renewcommand*{\Genplacrfullformat}[2]{%
   \emph{\Glsentrylongpl{##1}}##2\space
   (\firstacronymfont{\Glsentryshortpl{##1}})%
  }%
}
\setacronymstyle{em-long-short}
\loadglsentries[acronym]{acronyms}
\makeglossaries%

\addbibresource{intro/publications.bib}

\usetikzlibrary{
    matrix, positioning, fit, decorations.pathmorphing, decorations.markings,
    shapes, calc,
}
\graphicspath{{stropt/fig/}{progopt/fig/}{latopt/fig/}}
\DeclareGraphicsExtensions{.pdf}

\lstset{%
  language=C,
  basicstyle=\singlespacing\ttfamily,
  columns=fixed,
  mathescape=true,
  keywordstyle=\bfseries,
  otherkeywords={\#pragma,\#define},
}

\renewcommand*{\thefootnote}{\fnsymbol{footnote}}

%\listfiles  % Debug LaTeX Information

\newcommand{\thesisTitle}{%
Structural Optimization of Numerical Programs for High-Level Synthesis}
\newcommand{\thesisName}{Xitong Gao}
\newcommand{\thesisDate}{\today}
\newcommand{\thesisVersion}{0.0.1}

\newcommand{\thesisFirstSupervisor}{George A. Constantinides}
% \newcommand{\thesisSecondSupervisor}{John Smith}

\newcommand{\thesisUniversity}{\protect{Imperial College London}}
\newcommand{\thesisUniversityDepartment}{%
    Department of Electrical and Electronic Engineering}
\newcommand{\thesisUniversityGroup}{Circuits and Systems Research Group}
\newcommand{\thesisUniversityCity}{London}
\newcommand{\thesisUniversityStreetAddress}{South Kensington Campus}
\newcommand{\thesisUniversityPostalCode}{SW7 2AZ}

\hypersetup{%
    final=true,
    pdftitle={\thesisTitle},    %   - title (PDF meta)
    pdfauthor={\thesisName},    %   - author (PDF meta)
    % bookmarks=true,
    plainpages=false,           %   -
    linktoc=all,
    colorlinks=false,           %   - colorize links?
    pdfborder={0 0 0},          %   -
    breaklinks=true,            %   - allow line break inside links
    bookmarksnumbered=false,
    bookmarksopen=true
}

\newcommand{\eg}{\textit{e.g.}}
\newcommand{\etc}{\textit{etc.}}
\newcommand{\etal}{\textit{et~al.}}
\newcommand{\ie}{\textit{i.e.}}

\newcommand{\textbt}[1]{\texttt{\textbf{#1}}}

% names of stuff
\newcommand{\soap}{SOAP}
\newcommand{\groebner}{Gr{\"o}bner}

\newcommand{\defeq}{\vcentcolon=}
\newcommand{\vardefeq}{\stackrel{\text{def}}=}

\DeclareMathOperator{\bigo}{\mathcal{O}}

\DeclareMathOperator{\ulp}{\mathit{ulp}}
\DeclareMathOperator{\sign}{\mathrm{sign}}
\DeclareMathOperator{\roundupop}{\uparrow^\sharp_\circ}
\DeclareMathOperator{\rounddownop}{\downarrow^\sharp_\circ}
\DeclareMathOperator{\fresh}{\mathit{fresh}}
\DeclareMathOperator{\eqstep}{\blacktriangleright}
\DeclareMathOperator{\dom}{\mathrm{Dom}}
\DeclareMathOperator{\area}{\mathrm{Area}}
\DeclareMathOperator{\error}{\mathrm{Error}}
\DeclareMathOperator{\abserr}{\mathrm{AbsError}}
\DeclareMathOperator{\abs}{\mathrm{abs}}
\DeclareMathOperator{\frontier}{\mathsf{fr}}
\DeclareMathOperator{\closure}{\mathsf{cl}}

\newcommand{\integerset}{\ensuremath\mathbb{Z}}
\newcommand{\naturalset}{\ensuremath\mathbb{N}}
\newcommand{\realset}{\ensuremath\mathbb{R}}
\newcommand{\floatset}{\ensuremath\mathbb{F}}
\newcommand{\powersetof}[1]{\ensuremath\wp\left({#1}\right)}
\newcommand{\signset}{\ensuremath\mathbf{Sign}}
\newcommand{\intervalset}{\ensuremath\mathbf{Interval}}
\newcommand{\floatintervalset}{\ensuremath\intervalset_\floatset}
\newcommand{\errorset}{\ensuremath\mathbb{E}^\sharp}
\newcommand{\errordom}{\ensuremath\mathbf{\Sigma}_{\errorset}}
\newcommand{\labelset}{\ensuremath\mathbf{Label}}
\newcommand{\exprset}{\ensuremath\mathbf{Expr}}
\newcommand{\varset}{\ensuremath\mathbf{Var}}
\newcommand{\env}[1]{\ensuremath\mathbf{Env}_{#1}}
\newcommand{\enter}[1]{\ensuremath{A({#1})}}
\newcommand{\interval}[2]{\ensuremath\left[{#1}, {#2}\right]}
\newcommand{\lattice}[2]{\ensuremath\langle{#1}, {#2}\rangle}
\newcommand{\join}{\ensuremath\sqcup}
\newcommand{\meet}{\ensuremath\sqcap}

\newcommand{\marteltrace}{\texttt{martel\_trace}}
\newcommand{\frontiertrace}{\texttt{frontier\_trace}}
\newcommand{\greedytrace}{\texttt{greedy\_trace}}

% math
\newtheorem{definition}{Definition}[chapter]
\newtheorem{corollary}{Corollary}[chapter]
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{lemma}{Lemma}[chapter]

% program objects
\newcommand{\varx}{\texttt{x}}
\newcommand{\vary}{\texttt{y}}
\newcommand{\varz}{\texttt{z}}
\newcommand{\vara}{\texttt{a}}
\newcommand{\varb}{\texttt{b}}
\newcommand{\varc}{\texttt{c}}
\newcommand{\varn}{\texttt{n}}
\newcommand{\truelit}{\mathbf{tt}}
\newcommand{\falselit}{\mathbf{ff}}
\newcommand{\inttype}{\texttt{\textbf{int}}}
\newcommand{\floattype}{\texttt{\textbf{float}}}
\newcommand{\aexprset}{\ensuremath\mathbf{AExpr}}
\newcommand{\bexprset}{\ensuremath\mathbf{BExpr}}
\newcommand{\stmtset}{\ensuremath\mathbf{Stmt}}
\newcommand{\eqexprset}{\aexprset_\equiv}
\newcommand{\eqexprpowerset}{\powersetof\eqexprset}
\newcommand{\absexprset}{\aexprset^\sharp_\equiv}

% program syntax
\newcommand{\zeroormore}[1]{\ensuremath{\left( #1 \right)}^\star}
\newcommand{\syndef}{\mathbin{::=}}%
\newcommand{\synor}{\,\bigg|\,}%
\newcommand{\semicolon}{\ensuremath\mathbin{;}}
\newcommand{\iflit}{\texttt{\textbf{if}}}
\newcommand{\elselit}{\texttt{\textbf{else}}}
\newcommand{\whilelit}{\texttt{\textbf{while}}}
\newcommand{\forlit}{\texttt{\textbf{for}}}
\newcommand{\ifstmt}[2]{%
    \texttt{\iflit\,\left(#1\right)\,\left\{#2\right\}}}
% \newcommand{\whilestmt}[2]{%
    % \texttt{\whilelit\,\left(#1\right)\,\left\{#2\right\}}}

% metasemantic syntax
\newcommand{\binarymir}[3]{%
\tikz[mir, text height=0]{
    \node[mirnode] (op) at (0, 0) {#1};
    \node[mirnode] (a1) [below left=of op] {#2};
    \node[mirnode] (a2) [below right=of op] {#3};
    \draw[<-] (op) -- (a1);
    \draw[<-] (op) -- (a2);
}}
\newcommand{\ternarymir}[4]{%
\tikz[mir, text height=0]{
    \node[mirnode] (op) at (0, 0) {#1};
    \node[mirnode] (a1) [below left=of op] {#2};
    \node[mirnode] (a2) [below=of op] {#3};
    \node[mirnode] (a3) [below right=of op] {#4};
    \draw[<-] (op) -- (a1);
    \draw[<-] (op) -- (a2);
    \draw[<-] (op) -- (a3);
}}
\newcommand{\opset}{\ensuremath\mathbf{Op}}
\newcommand{\aopset}{\ensuremath\mathbf{AOp}}
\newcommand{\binaopset}{\ensuremath\mathbf{BinAOp}}
\newcommand{\dotop}{\ensuremath\mathbin{.}}
\newcommand{\qop}{\ensuremath\mathbin{?}}
\newcommand{\colonop}{\ensuremath\mathbin{:}}
\newcommand{\select}[3]{\ensuremath#1\qop#2\colonop#3}
\newcommand{\expand}{\ensuremath\mathbin{\star}}
\DeclareMathOperator{\fix}{\mathrm{fix}}
\DeclareMathOperator{\lfp}{\mathrm{lfp}}
\newcommand{\fixpoint}[1]{\ensuremath\fix\left({#1}\right)}
\newcommand{\fixpointmir}[3]{\ternarymir{$\fix$}{#1}{#2}{#3}}
\newcommand{\fixexprmir}{\fixpointmir{$b$}{$\mu_s$}{\varx}}
\DeclareMathOperator{\accessop}{\mathrm{access}}
\newcommand{\access}[2]{\ensuremath\accessop\left({#1}, {#2}\right)}
\DeclareMathOperator{\updateop}{\mathrm{update}}
\newcommand{\update}[3]{\ensuremath\updateop\left({#1}, {#2}, {#3}\right)}

% metasemantic objects
\newcommand{\sexprset}{\ensuremath\mathbf{SemExpr}}
\newcommand{\mirset}{\ensuremath\mathbf{MIR}}

% metasemantic functions
\DeclareMathOperator{\metasemop}{\mathsf{M}}
\DeclareMathOperator{\mirerrorop}{\mathsf{E}_\mathsf{m}}
\DeclareMathOperator{\exprerrorop}{\mathsf{E}_\mathsf{s}}
\newcommand{\varfunc}[1]{%
    \ensuremath\mathrm{var}\left(#1\right)
}
\newcommand{\metasemfunc}[1]{%
    \ensuremath\metasemop\left\llbracket{#1}\right\rrbracket}
\newcommand{\exprerrorfunc}[1]{\ensuremath\exprerrorop\left[{#1}\right]}
\newcommand{\mirerrorfunc}[1]{\ensuremath\mirerrorop\left[{#1}\right]}
\newcommand{\roundup}[1]{\ensuremath\roundupop\left(#1\right)}
\newcommand{\rounddown}[1]{\ensuremath\rounddownop\left(#1\right)}

% equivalent relations
\newcommand{\eqrel}{\ensuremath\equiv}
\newcommand{\eqgenrel}{\ensuremath\mathbin{\rightsquigarrow}}

% optimization
\DeclareMathOperator{\optimize}{\mathsf{O}}
\newcommand{\optfunc}[1]{\ensuremath\optimize\left[#1\right]}

% misc
\newcommand{\identity}{\mathrm{id}}
\DeclareMathOperator{\labfunc}{\mathrm{Label}}
\newcommand{\loopinvar}{\sigma^\sharp_\textrm{LI}}
\newcommand{\loopexit}{\sigma^\sharp_\textrm{LE}}

% latency
\newcommand\pair[2]{\ensuremath\langle{#1},{#2}\rangle}
\newcommand\smallpair[2]{\footnotesize$\pair{#1}{#2}$}
\newcommand\II{\mathrm{II}}
\newcommand\MII{\mathrm{MII}}
\newcommand\RecMII{\mathrm{RecMII}}
\newcommand\ResMII{\mathrm{ResMII}}

\newcommand\opsymbol{\otimes}

% Add brackets around a given set of nodes
\newcommand\bracketticklength{1.5mm}
\newcommand\brackets[1]{
\node[fit=#1, inner sep=0mm, outer sep=0.5mm] (bb) {};
\draw ([xshift=\bracketticklength]bb.north west) -- (bb.north west) --
(bb.south west) -- ([xshift=\bracketticklength]bb.south west);
\draw ([xshift=-\bracketticklength]bb.north east) -- (bb.north east) --
(bb.south east) -- ([xshift=-\bracketticklength]bb.south east);
}

\tikzset{%
  rect/.style = {
    draw, rectangle, minimum height=2em, minimum width=3em, align=center
  },
  block/.style = {
    draw, rectangle, minimum height=3em, minimum width=6em, align=center
  },
  mux/.style = {
    draw, trapezium, text width=2mm, minimum height=3.5mm
  },
  mir/.style={%
    node distance=3mm, baseline=(current bounding box.center)
  },
  mirnode/.style={%
    inner sep=0.7mm, text height=1ex, text depth=0ex
  },
  mirnodealt/.style={%
    inner sep=0.7mm, text depth=0ex
  },
  channel/.style = {
      preaction = { -, draw = white, line width = 2pt },
  },
  o/.style={
    shorten >=#1,
    decoration={
      markings, mark={ at position 1 with { \draw node
          [circle, draw=black, fill=white, radius=#1, inner sep=#1] {}; } }
    },
    postaction=decorate
  },
  o/.default=1.2pt,
}

\pgfplotsset{
    compat=1.10,
    every axis/.style={},
    select coords between index/.style 2 args={%
        x filter/.code={%
            \ifnum\coordindex<#1\def\pgfmathresult{}\fi
            \ifnum\coordindex>#2\def\pgfmathresult{}\fi
        },
        filter discard warning=false,
    }
}

% vim: nospell
